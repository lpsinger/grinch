Hi Badri, Alicia and Marco,

The event handler for GRBs may now be called with a flag called "test" with a default value of False. When passed with value True, the flag enables verbose logging and disables GraceDB event submission as well as saving of files on disk.

To successfully run the enclosed helper script (test_gcn_end2end.py), you should first log into Nemo (any account on any headnode will do) and set the PYTHONPATH variable:

export PYTHONPATH=/usr/lib/python2.7/dist-packages/:/home/gdb_processor/opt/lib/python2.6/site-packages:

This reflects the configuration on the gdb_processor account, where the GCN listener is actually run.

To run the script, simply do

python test_gcn_end2end.py [VOEvent.xml]

where VOEvent.xml is the name of the file you'd like to pass to the event filter.

The directories Swift/ and Fermi/ each contain sample VOEvents, taken from actual GRB notices, that ought to cover each use case we have for these two satellite observatories. They also contain similarly named output files with the output of running test_gcn_end2end.py on the associated VOEvent file; for example:

catch-event
VOEvent string successfully parsed.
Ivorn: ivo://nasa.gsfc.gcn/SWIFT#BAT_GRB_Pos_629693-134
Event role successfully parsed; role is observation
Packet type  61
SWIFT BAT Alert
The name for this event's portfolio (derived from its IVORN) is: nasa.gsfc.gcn_SWIFT#BAT_GRB_Pos_629693-134
Saving to  /home/gdb_processor/working/gcn_listener/cache/observation/nasa.gsfc.gcn_SWIFT#BAT_GRB_Pos_629693-134/GRB150204.xml
WARNING: Because the test flag was passed, this event was not actually saved.
WARNING: Because the test flag was passed, GraceDB event E125383 was not updated.
