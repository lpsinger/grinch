#!/usr/bin/env bash

if [ $1 == "start" ]; then
  export returndir=`pwd`
  cd /home/gdb_processor/working/gcn_listener

  twistd comet \
  --quiet \
  --remote=68.169.57.253:8099 \
  --remote=131.215.145.173:8099 \
  --remote=voevent.phys.soton.ac.uk:8099 \
  --remote=voevent.transientskp.org:8099 \
  --action=catch-event

  cd $returndir
  fi

if [ $1 == "stop" ]; then
  kill -9 `more $HOME/working/gcn_listener/twistd.pid`
  fi

if [ $1 == "--help" ] || [ $1 == "-h" ] ; then
  echo "Usage: gcn_listener [commands] [options]
Options:
  -h, --help		Show this help message and exit.
Commands:
  start			Start listening for interesting GCN alerts.
  stop			Kill the listener."
  fi
